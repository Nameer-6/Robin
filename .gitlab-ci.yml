stages:
  - test

run_login_feature:
  stage: test
  image: eclipse-temurin:20-jdk
  before_script:
    - apt-get update && apt-get install -y maven
  script:
    - echo "Running login.feature test..."
    - mvn -version
    - mvn clean test -Dcucumber.features=src/test/resources/features/login.feature
  artifacts:
    when: always  # ensure even on failure, artifacts get uploaded
    paths:
      - target/cucumber-reports/
      - target/cucumber-reports/html/
    reports:
      junit: target/cucumber-reports/Cucumber.xml
